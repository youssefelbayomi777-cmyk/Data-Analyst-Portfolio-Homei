<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Analytics Dashboard | Homei Property Technology</title>
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Bootstrap for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --light-bg: #ecf0f1;
            --dark-text: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .dashboard-header {
            background: var(--primary-color);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .dashboard-header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 300;
        }

        .dashboard-header .subtitle {
            margin-top: 10px;
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .kpi-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 30px;
            background: var(--light-bg);
        }

        .kpi-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .kpi-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .kpi-label {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .kpi-change {
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .positive { color: var(--success-color); }
        .negative { color: var(--accent-color); }

        .charts-section {
            padding: 30px;
        }

        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .chart-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark-text);
            font-weight: 600;
        }

        .filters {
            background: white;
            padding: 20px;
            margin: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .filter-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--dark-text);
        }

        .filter-group select {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            padding: 50px;
        }

        .footer {
            background: var(--primary-color);
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .dashboard-header h1 {
                font-size: 1.8rem;
            }
            
            .kpi-cards {
                grid-template-columns: 1fr;
            }
            
            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="dashboard-header">
            <h1>üè† Real Estate Analytics Dashboard</h1>
            <div class="subtitle">Homei Property Technology | Live Market Intelligence</div>
        </div>

        <!-- KPI Cards -->
        <div class="kpi-cards">
            <div class="kpi-card">
                <div class="kpi-label">Total Properties</div>
                <div class="kpi-value" id="totalProperties">12,847</div>
                <div class="kpi-change positive">‚Üë 8.3% vs last month</div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Average Price</div>
                <div class="kpi-value" id="avgPrice">‚Ç§5.2M</div>
                <div class="kpi-change positive">‚Üë 3.2% vs last month</div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Properties Sold</div>
                <div class="kpi-value" id="propertiesSold">342</div>
                <div class="kpi-change negative">‚Üì 2.1% vs last month</div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Market Volume</div>
                <div class="kpi-value" id="marketVolume">‚Ç§1.8B</div>
                <div class="kpi-change positive">‚Üë 12.7% vs last month</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <label for="locationFilter">Location:</label>
                <select id="locationFilter" onchange="updateDashboard()">
                    <option value="all">All Locations</option>
                    <option value="6th-october">6th of October</option>
                    <option value="new-cairo">New Cairo</option>
                    <option value="sheikh-zayed">Sheikh Zayed</option>
                    <option value="nasr-city">Nasr City</option>
                    <option value="maadi">Maadi</option>
                </select>
                
                <label for="propertyTypeFilter">Property Type:</label>
                <select id="propertyTypeFilter" onchange="updateDashboard()">
                    <option value="all">All Types</option>
                    <option value="apartment">Apartment</option>
                    <option value="villa">Villa</option>
                    <option value="townhouse">Townhouse</option>
                    <option value="penthouse">Penthouse</option>
                </select>
                
                <label for="timeRangeFilter">Time Range:</label>
                <select id="timeRangeFilter" onchange="updateDashboard()">
                    <option value="7d">Last 7 Days</option>
                    <option value="30d">Last 30 Days</option>
                    <option value="90d">Last 90 Days</option>
                    <option value="1y">Last Year</option>
                </select>
                
                <button class="btn btn-primary" onclick="refreshData()">
                    üîÑ Refresh Data
                </button>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <h3 class="chart-title">üìà Price Trends by Location</h3>
                        <canvas id="priceTrendsChart"></canvas>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="chart-container">
                        <h3 class="chart-title">üèòÔ∏è Property Distribution</h3>
                        <canvas id="propertyDistributionChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="chart-container">
                        <h3 class="chart-title">üìä Market Volume Over Time</h3>
                        <canvas id="marketVolumeChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <h3 class="chart-title">üéØ Price per Square Meter</h3>
                        <canvas id="pricePerSqmChart"></canvas>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="chart-container">
                        <h3 class="chart-title">‚è±Ô∏è Days on Market</h3>
                        <canvas id="daysOnMarketChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loadingSpinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Updating dashboard data...</p>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>¬© 2024 Homei Property Technology | Real Estate Analytics Dashboard</p>
            <p>Data refreshes every 5 minutes | Last update: <span id="lastUpdate">Just now</span></p>
        </div>
    </div>

    <script>
        // Chart configurations
        Chart.defaults.font.family = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        
        // Initialize charts
        let priceTrendsChart, propertyDistributionChart, marketVolumeChart, pricePerSqmChart, daysOnMarketChart;

        // Sample data generation
        function generateSampleData() {
            const locations = ['6th of October', 'New Cairo', 'Sheikh Zayed', 'Nasr City', 'Maadi'];
            const propertyTypes = ['Apartment', 'Villa', 'Townhouse', 'Penthouse'];
            
            return {
                priceTrends: locations.map(location => ({
                    location,
                    avgPrice: Math.floor(Math.random() * 3000000) + 3000000,
                    change: (Math.random() * 20 - 10).toFixed(1)
                })),
                
                propertyDistribution: propertyTypes.map(type => ({
                    type,
                    count: Math.floor(Math.random() * 1000) + 500
                })),
                
                marketVolume: Array.from({length: 12}, (_, i) => ({
                    month: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][i],
                    volume: Math.floor(Math.random() * 500000000) + 1000000000
                })),
                
                pricePerSqm: locations.map(location => ({
                    location,
                    price: Math.floor(Math.random() * 20000) + 20000
                })),
                
                daysOnMarket: locations.map(location => ({
                    location,
                    days: Math.floor(Math.random() * 60) + 30
                }))
            };
        }

        // Initialize all charts
        function initializeCharts() {
            const data = generateSampleData();
            
            // Price Trends Chart
            const priceTrendsCtx = document.getElementById('priceTrendsChart').getContext('2d');
            priceTrendsChart = new Chart(priceTrendsCtx, {
                type: 'bar',
                data: {
                    labels: data.priceTrends.map(d => d.location),
                    datasets: [{
                        label: 'Average Price (EGP)',
                        data: data.priceTrends.map(d => d.avgPrice),
                        backgroundColor: 'rgba(52, 152, 219, 0.8)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Ç§' + (value / 1000000).toFixed(1) + 'M';
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Average Price: ‚Ç§' + (context.parsed.y / 1000000).toFixed(2) + 'M';
                                }
                            }
                        }
                    }
                }
            });

            // Property Distribution Chart
            const propertyDistributionCtx = document.getElementById('propertyDistributionChart').getContext('2d');
            propertyDistributionChart = new Chart(propertyDistributionCtx, {
                type: 'doughnut',
                data: {
                    labels: data.propertyDistribution.map(d => d.type),
                    datasets: [{
                        data: data.propertyDistribution.map(d => d.count),
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.8)',
                            'rgba(46, 204, 113, 0.8)',
                            'rgba(241, 196, 15, 0.8)',
                            'rgba(231, 76, 60, 0.8)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Market Volume Chart
            const marketVolumeCtx = document.getElementById('marketVolumeChart').getContext('2d');
            marketVolumeChart = new Chart(marketVolumeCtx, {
                type: 'line',
                data: {
                    labels: data.marketVolume.map(d => d.month),
                    datasets: [{
                        label: 'Market Volume (EGP)',
                        data: data.marketVolume.map(d => d.volume),
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Ç§' + (value / 1000000000).toFixed(1) + 'B';
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Volume: ‚Ç§' + (context.parsed.y / 1000000000).toFixed(2) + 'B';
                                }
                            }
                        }
                    }
                }
            });

            // Price per Square Meter Chart
            const pricePerSqmCtx = document.getElementById('pricePerSqmChart').getContext('2d');
            pricePerSqmChart = new Chart(pricePerSqmCtx, {
                type: 'horizontalBar',
                data: {
                    labels: data.pricePerSqm.map(d => d.location),
                    datasets: [{
                        label: 'Price per SQM (EGP)',
                        data: data.pricePerSqm.map(d => d.price),
                        backgroundColor: 'rgba(46, 204, 113, 0.8)',
                        borderColor: 'rgba(46, 204, 113, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Ç§' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Price per SQM: ‚Ç§' + context.parsed.x.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });

            // Days on Market Chart
            const daysOnMarketCtx = document.getElementById('daysOnMarketChart').getContext('2d');
            daysOnMarketChart = new Chart(daysOnMarketCtx, {
                type: 'radar',
                data: {
                    labels: data.daysOnMarket.map(d => d.location),
                    datasets: [{
                        label: 'Days on Market',
                        data: data.daysOnMarket.map(d => d.days),
                        borderColor: 'rgba(231, 76, 60, 1)',
                        backgroundColor: 'rgba(231, 76, 60, 0.2)',
                        pointBackgroundColor: 'rgba(231, 76, 60, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(231, 76, 60, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + ' days';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update dashboard based on filters
        function updateDashboard() {
            showLoading();
            
            // Simulate data update
            setTimeout(() => {
                const data = generateSampleData();
                
                // Update KPIs with random variations
                document.getElementById('totalProperties').textContent = 
                    (Math.floor(Math.random() * 5000) + 10000).toLocaleString();
                document.getElementById('avgPrice').textContent = 
                    '‚Ç§' + (Math.floor(Math.random() * 2000000) + 4000000) / 1000000 + 'M';
                document.getElementById('propertiesSold').textContent = 
                    Math.floor(Math.random() * 200) + 250;
                document.getElementById('marketVolume').textContent = 
                    '‚Ç§' + (Math.floor(Math.random() * 1000000000) + 1000000000) / 1000000000 + 'B';
                
                // Update charts with new data
                updateChartData(priceTrendsChart, data.priceTrends.map(d => d.avgPrice));
                updateChartData(propertyDistributionChart, data.propertyDistribution.map(d => d.count));
                updateChartData(marketVolumeChart, data.marketVolume.map(d => d.volume));
                updateChartData(pricePerSqmChart, data.pricePerSqm.map(d => d.price));
                updateChartData(daysOnMarketChart, data.daysOnMarket.map(d => d.days));
                
                updateLastUpdateTime();
                hideLoading();
            }, 1000);
        }

        // Update chart data
        function updateChartData(chart, newData) {
            chart.data.datasets[0].data = newData;
            chart.update();
        }

        // Refresh data
        function refreshData() {
            updateDashboard();
        }

        // Loading states
        function showLoading() {
            document.getElementById('loadingSpinner').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }

        // Update last update time
        function updateLastUpdateTime() {
            document.getElementById('lastUpdate').textContent = 'Just now';
        }

        // Auto-refresh every 30 seconds
        setInterval(() => {
            updateDashboard();
        }, 30000);

        // Initialize dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            updateLastUpdateTime();
        });

        // Simulate real-time updates
        setInterval(() => {
            // Update random KPI
            const kpis = ['totalProperties', 'avgPrice', 'propertiesSold', 'marketVolume'];
            const randomKpi = kpis[Math.floor(Math.random() * kpis.length)];
            const element = document.getElementById(randomKpi);
            
            if (randomKpi === 'totalProperties') {
                element.textContent = (parseInt(element.textContent.replace(',', '')) + Math.floor(Math.random() * 10) - 5).toLocaleString();
            } else if (randomKpi === 'avgPrice') {
                const current = parseFloat(element.textContent.replace('‚Ç§', '').replace('M', ''));
                element.textContent = '‚Ç§' + (current + (Math.random() * 0.2 - 0.1)).toFixed(1) + 'M';
            } else if (randomKpi === 'propertiesSold') {
                element.textContent = parseInt(element.textContent) + Math.floor(Math.random() * 3) - 1;
            } else if (randomKpi === 'marketVolume') {
                const current = parseFloat(element.textContent.replace('‚Ç§', '').replace('B', ''));
                element.textContent = '‚Ç§' + (current + (Math.random() * 0.1 - 0.05)).toFixed(1) + 'B';
            }
        }, 5000);
    </script>
</body>
</html>
